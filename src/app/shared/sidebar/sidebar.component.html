<aside class="sidebar" [class.collapsed]="isSidebarCollapsed" [class.mobile-open]="isMobileOpen">
  <div class="sidebar-header">
    <div class="sidebar-logo">
      <img src="/assets/images/Logo-Panaderia.png" alt="Logo PanaderÃ­a">
      <div class="sidebar-logo-text">El Buen Sabor</div>
    </div>
  </div>

  <div class="sidebar-content">
    <nav class="sidebar-nav">
      <ul class="nav-list">
        <!-- Inicio -->
        <li class="nav-item">
          <a routerLink="/home" routerLinkActive="active" class="nav-link">
            <span class="nav-icon">ğŸ </span>
            <span class="nav-text">Inicio</span>
          </a>
        </li>

        <!-- MenÃº desplegable: Entidades -->
        <li class="nav-item dropdown">
          <a (click)="toggleDropdown('entidades')" class="nav-link dropdown-toggle" [class.active]="isDropdownActive('entidades')">
            <span class="nav-icon">ğŸ“‹</span>
            <span class="nav-text">Entidades</span>
            <i class="dropdown-icon" [class.rotated]="isDropdownOpen('entidades')">â–¼</i>
          </a>
          <ul class="dropdown-menu" [class.open]="isDropdownOpen('entidades')">
            <li class="dropdown-item" [class.disabled]="!tienePermiso('Administradores')" [title]="!tienePermiso('Administradores') ? 'No tienes permiso para acceder a esta secciÃ³n' : ''">
              <a routerLink="/entidades/administradores" routerLinkActive="active" class="dropdown-link"
                 [class.disabled]="!tienePermiso('Administradores')">
                <span class="nav-icon">ğŸ‘¨â€ğŸ’¼</span>
                <span class="nav-text">Administradores</span>
              </a>
            </li>
            <li class="dropdown-item" [class.disabled]="!tienePermiso('Clientes')" [title]="!tienePermiso('Clientes') ? 'No tienes permiso para acceder a esta secciÃ³n' : ''">
              <a routerLink="/entidades/clientes" routerLinkActive="active" class="dropdown-link"
                 [class.disabled]="!tienePermiso('Clientes')">
                <span class="nav-icon">ğŸ‘¥</span>
                <span class="nav-text">Clientes</span>
              </a>
            </li>
            <li class="dropdown-item">
              <a routerLink="/entidades/productos" routerLinkActive="active" class="dropdown-link">
                <span class="nav-icon">ğŸ</span>
                <span class="nav-text">Productos</span>
              </a>
            </li>
            <li class="dropdown-item" [class.disabled]="!tienePermiso('Repartidores')" [title]="!tienePermiso('Repartidores') ? 'No tienes permiso para acceder a esta secciÃ³n' : ''">
              <a routerLink="/entidades/repartidores" routerLinkActive="active" class="dropdown-link"
                 [class.disabled]="!tienePermiso('Repartidores')">
                <span class="nav-icon">ğŸšš</span>
                <span class="nav-text">Repartidores</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- MenÃº desplegable: Transacciones -->
        <li class="nav-item dropdown">
          <a (click)="toggleDropdown('transacciones')" class="nav-link dropdown-toggle" [class.active]="isDropdownActive('transacciones')">
            <span class="nav-icon">ğŸ’°</span>
            <span class="nav-text">Transacciones</span>
            <i class="dropdown-icon" [class.rotated]="isDropdownOpen('transacciones')">â–¼</i>
          </a>
          <ul class="dropdown-menu" [class.open]="isDropdownOpen('transacciones')">
            <li class="dropdown-item">
              <a routerLink="/transacciones/pedidos" routerLinkActive="active" class="dropdown-link">
                <span class="nav-icon">ğŸ›’</span>
                <span class="nav-text">Pedidos</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- MenÃº desplegable: Reportes/Consultas -->
        <li class="nav-item dropdown">
          <a (click)="toggleDropdown('reportes')" class="nav-link dropdown-toggle" [class.active]="isDropdownActive('reportes')">
            <span class="nav-icon">ğŸ“Š</span>
            <span class="nav-text">Reportes/Consultas</span>
            <i class="dropdown-icon" [class.rotated]="isDropdownOpen('reportes')">â–¼</i>
          </a>
          <ul class="dropdown-menu" [class.open]="isDropdownOpen('reportes')">
            <li class="dropdown-item">
              <a routerLink="/reportes-consultas/ventas" routerLinkActive="active" class="dropdown-link">
                <span class="nav-icon">ğŸ“ˆ</span>
                <span class="nav-text">Reporte de Ventas</span>
              </a>
            </li>
            <li class="dropdown-item">
              <a routerLink="/reportes-consultas/productos" routerLinkActive="active" class="dropdown-link">
                <span class="nav-icon">ğŸ“‰</span>
                <span class="nav-text">Reporte de Productos</span>
              </a>
            </li>
          </ul>
        </li>

        <li class="nav-divider"></li>

        <!-- Utilidades -->
        <li class="nav-item" [class.disabled]="!tienePermiso('ConfiguraciÃ³n')" [title]="!tienePermiso('ConfiguraciÃ³n') ? 'No tienes permiso para acceder a esta secciÃ³n' : ''">
          <a routerLink="/utilidades" routerLinkActive="active" class="nav-link"
             [class.disabled]="!tienePermiso('ConfiguraciÃ³n')">
            <span class="nav-icon">âš™ï¸</span>
            <span class="nav-text">Utilidades</span>
          </a>
        </li>

        <!-- Ayuda -->
        <li class="nav-item">
          <a routerLink="/ayuda" routerLinkActive="active" class="nav-link">
            <span class="nav-icon">â“</span>
            <span class="nav-text">Ayuda</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <div class="sidebar-footer">
    <div class="user-info">
      <div class="user-avatar">
        <img [src]="getUserAvatar()" [alt]="usuario?.nombre">
      </div>
      <div class="user-details">
        <div class="user-name">{{ usuario?.nombre }}</div>
        <div class="user-role">{{ getRoleName(usuario?.rol) }}</div>
      </div>
    </div>
  </div>
</aside>

<!-- Overlay para dispositivos mÃ³viles -->
<div class="sidebar-overlay" [class.active]="isMobileOpen" (click)="closeMobileSidebar()"></div>
