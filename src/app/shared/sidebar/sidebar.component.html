<aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
  <div class="sidebar-header">
    <div class="sidebar-logo">
      <img src="/assets/images/Logo-Panaderia.png" alt="Logo Panadería">
    </div>
  </div>

  <div class="sidebar-content">
    <nav class="sidebar-nav">
      <ul class="nav-list">
        <!-- Inicio -->
        <li class="nav-item">
          <a routerLink="/home" routerLinkActive="active" class="nav-link">
            <i class="fas fa-home nav-icon"></i>
            <span class="nav-text">🏠 Inicio</span>
          </a>
        </li>

        <!-- Menú desplegable: Entidades -->
        <li class="nav-item dropdown">
          <a (click)="toggleDropdown('entidades')" class="nav-link dropdown-toggle" [class.active]="isDropdownActive('entidades')">
            <i class="fas fa-database nav-icon"></i>
            <span class="nav-text">📋 Entidades</span>
            <i class="fas fa-chevron-down dropdown-icon" [class.rotated]="isDropdownOpen('entidades')"></i>
          </a>
          <ul class="dropdown-menu" [class.open]="isDropdownOpen('entidades')">
            <li class="dropdown-item" [class.disabled]="!tienePermiso('Administradores')">
              <a routerLink="/entidades/administradores" routerLinkActive="active" class="dropdown-link"
                 [class.disabled]="!tienePermiso('Administradores')"
                 [title]="!tienePermiso('Administradores') ? 'No tienes permiso para acceder a esta sección' : ''">
                <i class="fas fa-user-shield nav-icon"></i>
                <span class="nav-text">👨‍💼 Administradores</span>
              </a>
            </li>
            <li class="dropdown-item" [class.disabled]="!tienePermiso('Clientes')">
              <a routerLink="/entidades/clientes" routerLinkActive="active" class="dropdown-link"
                 [class.disabled]="!tienePermiso('Clientes')"
                 [title]="!tienePermiso('Clientes') ? 'No tienes permiso para acceder a esta sección' : ''">
                <i class="fas fa-users nav-icon"></i>
                <span class="nav-text">👥 Clientes</span>
              </a>
            </li>
            <li class="dropdown-item">
              <a routerLink="/entidades/productos" routerLinkActive="active" class="dropdown-link">
                <i class="fas fa-bread-slice nav-icon"></i>
                <span class="nav-text">🍞 Productos</span>
              </a>
            </li>
            <li class="dropdown-item" [class.disabled]="!tienePermiso('Repartidores')">
              <a routerLink="/entidades/repartidores" routerLinkActive="active" class="dropdown-link"
                 [class.disabled]="!tienePermiso('Repartidores')"
                 [title]="!tienePermiso('Repartidores') ? 'No tienes permiso para acceder a esta sección' : ''">
                <i class="fas fa-truck nav-icon"></i>
                <span class="nav-text">🚚 Repartidores</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Menú desplegable: Transacciones -->
        <li class="nav-item dropdown">
          <a (click)="toggleDropdown('transacciones')" class="nav-link dropdown-toggle" [class.active]="isDropdownActive('transacciones')">
            <i class="fas fa-exchange-alt nav-icon"></i>
            <span class="nav-text">💰 Transacciones</span>
            <i class="fas fa-chevron-down dropdown-icon" [class.rotated]="isDropdownOpen('transacciones')"></i>
          </a>
          <ul class="dropdown-menu" [class.open]="isDropdownOpen('transacciones')">
            <li class="dropdown-item">
              <a routerLink="/transacciones/pedidos" routerLinkActive="active" class="dropdown-link">
                <i class="fas fa-shopping-bag nav-icon"></i>
                <span class="nav-text">🛒 Pedidos</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Menú desplegable: Reportes/Consultas -->
        <li class="nav-item dropdown">
          <a (click)="toggleDropdown('reportes')" class="nav-link dropdown-toggle" [class.active]="isDropdownActive('reportes')">
            <i class="fas fa-chart-bar nav-icon"></i>
            <span class="nav-text">📊 Reportes/Consultas</span>
            <i class="fas fa-chevron-down dropdown-icon" [class.rotated]="isDropdownOpen('reportes')"></i>
          </a>
          <ul class="dropdown-menu" [class.open]="isDropdownOpen('reportes')">
            <li class="dropdown-item">
              <a routerLink="/reportes-consultas/ventas" routerLinkActive="active" class="dropdown-link">
                <i class="fas fa-chart-line nav-icon"></i>
                <span class="nav-text">📈 Reporte de Ventas</span>
              </a>
            </li>
            <li class="dropdown-item">
              <a routerLink="/reportes-consultas/productos" routerLinkActive="active" class="dropdown-link">
                <i class="fas fa-chart-pie nav-icon"></i>
                <span class="nav-text">📉 Reporte de Productos</span>
              </a>
            </li>
          </ul>
        </li>

        <li class="nav-divider"></li>

        <!-- Utilidades -->
        <li class="nav-item" [class.disabled]="!tienePermiso('Configuración')">
          <a routerLink="/utilidades" routerLinkActive="active" class="nav-link"
             [class.disabled]="!tienePermiso('Configuración')"
             [title]="!tienePermiso('Configuración') ? 'No tienes permiso para acceder a esta sección' : ''">
            <i class="fas fa-cog nav-icon"></i>
            <span class="nav-text">⚙️ Utilidades</span>
          </a>
        </li>

        <!-- Ayuda -->
        <li class="nav-item">
          <a routerLink="/ayuda" routerLinkActive="active" class="nav-link">
            <i class="fas fa-question-circle nav-icon"></i>
            <span class="nav-text">❓ Ayuda</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>

  <div class="sidebar-footer">
    <div class="user-info">
      <div class="user-avatar">
        <img [src]="getUserAvatar()" [alt]="usuario?.nombre">
      </div>
      <div class="user-details">
        <div class="user-name">{{ usuario?.nombre }}</div>
        <div class="user-role">{{ getRoleName(usuario?.rol) }}</div>
      </div>
    </div>
  </div>
</aside>
